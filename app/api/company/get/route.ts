import { NextRequest } from 'next/server'; import { prisma } from '@/lib/prisma'; export const runtime='nodejs'; export async function GET(req:NextRequest){ const {searchParams}=new URL(req.url); const paramId=searchParams.get('companyId')||undefined; const cid=paramId||req.cookies.get('companyId')?.value||undefined; if(!cid) return new Response(JSON.stringify({company:null}),{headers:{'Content-Type':'application/json'}}); const c=await prisma.company.findUnique({where:{id:cid}, select:{id:true,name:true,botName:true,themePrimary:true,logoUrl:true,suggested:true,watermarkEnabled:true,watermarkUrl:true,defaultLang:true}}); return new Response(JSON.stringify({company:c}),{headers:{'Content-Type':'application/json'}});}