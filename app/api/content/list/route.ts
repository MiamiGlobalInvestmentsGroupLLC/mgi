import { NextRequest } from 'next/server'; import { prisma } from '@/lib/prisma'; export const runtime='nodejs'; export async function GET(req:NextRequest){ const cid=req.cookies.get('companyId')?.value; if(!cid) return new Response(JSON.stringify({error:'NO_AUTH'}),{status:401}); const docs=await prisma.document.findMany({where:{companyId:cid}, orderBy:{createdAt:'desc'}, take:200, select:{id:true,title:true,source:true,url:true}}); return new Response(JSON.stringify({docs}),{headers:{'Content-Type':'application/json'}});}